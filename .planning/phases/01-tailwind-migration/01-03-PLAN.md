---
phase: 01-tailwind-migration
plan: 03
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - src/components/Heading.tsx
  - src/components/Text.tsx
  - src/components/Surface.tsx
autonomous: true

must_haves:
  truths:
    - "User sees Heading component with same visual appearance as CSS Modules version"
    - "User sees Text component rendering correctly with all variants"
    - "User sees Surface component with proper background and padding"
    - "Developer can use variant props (level, tone, etc.) on design system components"
  artifacts:
    - path: "src/components/Heading.tsx"
      provides: "Heading component with CVA variants"
      contains: "headingVariants"
    - path: "src/components/Text.tsx"
      provides: "Text component with CVA variants"
      contains: "textVariants"
    - path: "src/components/Surface.tsx"
      provides: "Surface component with CVA variants"
      contains: "surfaceVariants"
  key_links:
    - from: "src/components/Heading.tsx"
      to: "@/lib/utils"
      via: "cn import"
      pattern: "import.*cn.*from.*@/lib/utils"
    - from: "src/components/Heading.tsx"
      to: "class-variance-authority"
      via: "cva import"
      pattern: "import.*cva.*from.*class-variance-authority"
---

<objective>
Migrate design system primitives (Heading, Text, Surface) from CSS Modules to Tailwind with CVA

Purpose: These three components are the foundational design system primitives used throughout the app. Migrating them first establishes the CVA pattern for all other component migrations.

Output: Heading, Text, and Surface components using Tailwind classes and class-variance-authority, with identical visual output to the CSS Modules versions.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-tailwind-migration/01-RESEARCH.md

# Prior plan output - Tailwind and cn() are now available
@.planning/phases/01-tailwind-migration/01-02-SUMMARY.md

# Current components to migrate
@src/components/Heading.tsx
@src/components/Heading.module.css
@src/components/Text.tsx
@src/components/Text.module.css
@src/components/Surface.tsx
@src/components/Surface.module.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Heading component to Tailwind + CVA</name>
  <files>
    src/components/Heading.tsx
  </files>
  <action>
1. Read the current Heading.tsx and Heading.module.css to understand existing styles and variants

2. Create CVA-based Heading component. Map the CSS Module styles to Tailwind utilities:

   ```typescript
   import { cva, type VariantProps } from "class-variance-authority"
   import { cn } from "@/lib/utils"

   const headingVariants = cva(
     // Base classes (always applied)
     "font-bold tracking-tight",
     {
       variants: {
         level: {
           1: "text-4xl md:text-5xl lg:text-6xl",
           2: "text-3xl md:text-4xl",
           3: "text-2xl md:text-3xl",
           4: "text-xl md:text-2xl",
           5: "text-lg md:text-xl",
           6: "text-base md:text-lg",
         },
         tone: {
           light: "text-white",
           dark: "text-foreground",
           accent: "text-primary",
         },
         align: {
           left: "text-left",
           center: "text-center",
           right: "text-right",
         },
       },
       defaultVariants: {
         level: 2,
         tone: "dark",
         align: "left",
       },
     }
   )

   interface HeadingProps
     extends React.HTMLAttributes<HTMLHeadingElement>,
       VariantProps<typeof headingVariants> {
     as?: "h1" | "h2" | "h3" | "h4" | "h5" | "h6"
     uppercase?: boolean
   }

   const Heading = ({
     as,
     level = 2,
     tone,
     align,
     uppercase = true,
     className,
     children,
     ...props
   }: HeadingProps) => {
     const Component = as || (`h${level}` as keyof JSX.IntrinsicElements)

     return (
       <Component
         className={cn(
           headingVariants({ level, tone, align }),
           uppercase && "uppercase",
           className
         )}
         {...props}
       >
         {children}
       </Component>
     )
   }

   export default Heading
   export { headingVariants }
   ```

3. Preserve the existing component interface (props) exactly - only the internal implementation changes

4. Keep the CSS Module file for now (will delete in cleanup plan) - but component should NOT import it

NOTE: Map existing CSS properties to Tailwind equivalents. Refer to CSS Module file for exact values.
  </action>
  <verify>
   - Heading.tsx no longer imports Heading.module.css
   - Heading.tsx imports cn from @/lib/utils
   - Heading.tsx imports cva from class-variance-authority
   - Component renders with same visual output as before
   - All variant props (level, tone, align, uppercase) work correctly
  </verify>
  <done>Heading component migrated to Tailwind + CVA with preserved visual appearance</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Text component to Tailwind + CVA</name>
  <files>
    src/components/Text.tsx
  </files>
  <action>
1. Read the current Text.tsx and Text.module.css to understand existing styles and variants

2. Create CVA-based Text component:

   ```typescript
   import { cva, type VariantProps } from "class-variance-authority"
   import { cn } from "@/lib/utils"

   const textVariants = cva(
     // Base classes
     "leading-relaxed",
     {
       variants: {
         size: {
           xs: "text-xs",
           sm: "text-sm",
           base: "text-base",
           lg: "text-lg",
           xl: "text-xl",
         },
         tone: {
           light: "text-white",
           dark: "text-foreground",
           muted: "text-muted-foreground",
           accent: "text-primary",
         },
         weight: {
           normal: "font-normal",
           medium: "font-medium",
           semibold: "font-semibold",
           bold: "font-bold",
         },
         align: {
           left: "text-left",
           center: "text-center",
           right: "text-right",
         },
       },
       defaultVariants: {
         size: "base",
         tone: "dark",
         weight: "normal",
         align: "left",
       },
     }
   )

   interface TextProps
     extends React.HTMLAttributes<HTMLParagraphElement>,
       VariantProps<typeof textVariants> {
     as?: "p" | "span" | "div"
   }

   const Text = ({
     as: Component = "p",
     size,
     tone,
     weight,
     align,
     className,
     children,
     ...props
   }: TextProps) => {
     return (
       <Component
         className={cn(textVariants({ size, tone, weight, align }), className)}
         {...props}
       >
         {children}
       </Component>
     )
   }

   export default Text
   export { textVariants }
   ```

3. Preserve the existing component interface exactly

NOTE: Adjust variant values based on actual CSS Module content.
  </action>
  <verify>
   - Text.tsx no longer imports Text.module.css
   - Text.tsx imports cn from @/lib/utils
   - Component renders with same visual output as before
   - All variant props work correctly
  </verify>
  <done>Text component migrated to Tailwind + CVA with preserved visual appearance</done>
</task>

<task type="auto">
  <name>Task 3: Migrate Surface component to Tailwind + CVA</name>
  <files>
    src/components/Surface.tsx
  </files>
  <action>
1. Read the current Surface.tsx and Surface.module.css to understand existing styles

2. Create CVA-based Surface component:

   ```typescript
   import { cva, type VariantProps } from "class-variance-authority"
   import { cn } from "@/lib/utils"

   const surfaceVariants = cva(
     // Base classes
     "",
     {
       variants: {
         variant: {
           default: "bg-card text-card-foreground",
           elevated: "bg-card text-card-foreground shadow-lg",
           outlined: "border border-border bg-transparent",
           filled: "bg-muted text-muted-foreground",
         },
         padding: {
           none: "p-0",
           sm: "p-2",
           md: "p-4",
           lg: "p-6",
           xl: "p-8",
         },
         rounded: {
           none: "rounded-none",
           sm: "rounded-sm",
           md: "rounded-md",
           lg: "rounded-lg",
           xl: "rounded-xl",
           full: "rounded-full",
         },
       },
       defaultVariants: {
         variant: "default",
         padding: "md",
         rounded: "md",
       },
     }
   )

   interface SurfaceProps
     extends React.HTMLAttributes<HTMLDivElement>,
       VariantProps<typeof surfaceVariants> {
     as?: React.ElementType
   }

   const Surface = ({
     as: Component = "div",
     variant,
     padding,
     rounded,
     className,
     children,
     ...props
   }: SurfaceProps) => {
     return (
       <Component
         className={cn(surfaceVariants({ variant, padding, rounded }), className)}
         {...props}
       >
         {children}
       </Component>
     )
   }

   export default Surface
   export { surfaceVariants }
   ```

3. Preserve the existing component interface exactly

4. Commit all three migrations:
   ```bash
   git add -A
   git commit -m "refactor(01-03): migrate design system primitives to Tailwind + CVA

   - Heading: CVA variants for level, tone, align, uppercase
   - Text: CVA variants for size, tone, weight, align
   - Surface: CVA variants for variant, padding, rounded
   - All components use cn() for class composition
   - Visual output preserved, CSS Modules no longer imported

   Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
   ```

NOTE: Adjust variant values based on actual CSS Module content.
  </action>
  <verify>
   - Surface.tsx no longer imports Surface.module.css
   - Surface.tsx imports cn from @/lib/utils
   - Component renders with same visual output as before
   - All variant props work correctly
   - `npm run dev` shows all three components rendering correctly
  </verify>
  <done>Surface component migrated, all three design primitives now use Tailwind + CVA</done>
</task>

</tasks>

<verification>
Run after all tasks complete:

1. Visual regression check:
   - Compare Heading appearance before/after (screenshots if needed)
   - Compare Text appearance before/after
   - Compare Surface appearance before/after

2. Variant testing:
   - Heading: Test level={1-6}, tone="light"/"dark"/"accent", align, uppercase
   - Text: Test size, tone, weight, align combinations
   - Surface: Test variant, padding, rounded combinations

3. Composition testing:
   - Verify `className` prop overrides work: `<Heading className="text-red-500">` shows red text
   - Verify cn() merges correctly: conflicting classes resolve properly

4. No regressions:
   - `npm run dev` works
   - Pages using these components render correctly
</verification>

<success_criteria>
- All three design primitives use Tailwind + CVA instead of CSS Modules
- No CSS Module imports in Heading.tsx, Text.tsx, Surface.tsx
- Visual output identical to CSS Modules version
- All variant props work correctly
- className prop allows overrides via cn() composition
- Components exported with same interface as before
</success_criteria>

<output>
After completion, create `.planning/phases/01-tailwind-migration/01-03-SUMMARY.md`
</output>
