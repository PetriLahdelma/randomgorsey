---
phase: 01-tailwind-migration
plan: 05
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - src/components/Alert.tsx
  - src/components/Badge.tsx
  - src/components/Modal.tsx
  - src/components/Spinner.tsx
  - src/components/Avatar.tsx
  - src/components/Caption.tsx
autonomous: true

must_haves:
  truths:
    - "User sees Alert component with proper variant colors (success, error, warning, info)"
    - "User sees Badge component with correct variant styling"
    - "User sees Modal overlay and content with proper positioning and backdrop"
    - "User sees Spinner animation working correctly"
    - "User sees Avatar with proper sizing and fallback"
    - "User sees Caption text with proper styling"
  artifacts:
    - path: "src/components/Alert.tsx"
      provides: "Alert component with CVA variants"
      contains: "alertVariants"
    - path: "src/components/Badge.tsx"
      provides: "Badge component with CVA variants"
      contains: "badgeVariants"
    - path: "src/components/Modal.tsx"
      provides: "Modal component with Tailwind styling"
      contains: "cn("
    - path: "src/components/Spinner.tsx"
      provides: "Spinner component with Tailwind animation"
      contains: "animate-spin"
  key_links:
    - from: "src/components/Alert.tsx"
      to: "@/lib/utils"
      via: "cn import"
      pattern: "import.*cn.*from.*@/lib/utils"
    - from: "src/components/Modal.tsx"
      to: "framer-motion"
      via: "animation import"
      pattern: "import.*motion.*from.*framer-motion"
---

<objective>
Migrate feedback components (Alert, Badge, Modal, Spinner, Avatar, Caption) from CSS Modules to Tailwind

Purpose: Feedback components provide visual feedback to users (notifications, loading states, modals). Migrating them ensures consistent feedback patterns using Tailwind.

Output: All feedback components using Tailwind classes with preserved functionality and animations.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-tailwind-migration/01-RESEARCH.md

# Prior plan output
@.planning/phases/01-tailwind-migration/01-02-SUMMARY.md

# Current components to migrate
@src/components/Alert.tsx
@src/components/Alert.module.css
@src/components/Badge.tsx
@src/components/Badge.module.css
@src/components/Modal.tsx
@src/components/Modal.module.css
@src/components/Spinner.tsx
@src/components/Spinner.module.css
@src/components/Avatar.tsx
@src/components/Avatar.module.css
@src/components/Caption.tsx
@src/components/Caption.module.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Alert and Badge components</name>
  <files>
    src/components/Alert.tsx
    src/components/Badge.tsx
  </files>
  <action>
1. Read current Alert.tsx, Alert.module.css to understand variants

2. Create CVA-based Alert component:

   ```typescript
   import { cva, type VariantProps } from "class-variance-authority"
   import { cn } from "@/lib/utils"

   const alertVariants = cva(
     // Base classes
     "relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",
     {
       variants: {
         variant: {
           default: "bg-background text-foreground",
           success: "border-green-500/50 bg-green-500/10 text-green-600 [&>svg]:text-green-600",
           error: "border-destructive/50 bg-destructive/10 text-destructive [&>svg]:text-destructive",
           warning: "border-yellow-500/50 bg-yellow-500/10 text-yellow-600 [&>svg]:text-yellow-600",
           info: "border-blue-500/50 bg-blue-500/10 text-blue-600 [&>svg]:text-blue-600",
         },
       },
       defaultVariants: {
         variant: "default",
       },
     }
   )

   interface AlertProps
     extends React.HTMLAttributes<HTMLDivElement>,
       VariantProps<typeof alertVariants> {}

   const Alert = ({
     className,
     variant,
     children,
     ...props
   }: AlertProps) => {
     return (
       <div
         role="alert"
         className={cn(alertVariants({ variant }), className)}
         {...props}
       >
         {children}
       </div>
     )
   }

   export default Alert
   export { Alert, alertVariants }
   ```

3. Read current Badge.tsx, Badge.module.css to understand variants

4. Create CVA-based Badge component:

   ```typescript
   import { cva, type VariantProps } from "class-variance-authority"
   import { cn } from "@/lib/utils"

   const badgeVariants = cva(
     // Base classes
     "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
     {
       variants: {
         variant: {
           default: "border-transparent bg-primary text-primary-foreground",
           secondary: "border-transparent bg-secondary text-secondary-foreground",
           destructive: "border-transparent bg-destructive text-destructive-foreground",
           outline: "text-foreground",
           success: "border-transparent bg-green-500 text-white",
           warning: "border-transparent bg-yellow-500 text-white",
         },
       },
       defaultVariants: {
         variant: "default",
       },
     }
   )

   interface BadgeProps
     extends React.HTMLAttributes<HTMLDivElement>,
       VariantProps<typeof badgeVariants> {}

   const Badge = ({ className, variant, ...props }: BadgeProps) => {
     return (
       <div className={cn(badgeVariants({ variant }), className)} {...props} />
     )
   }

   export default Badge
   export { Badge, badgeVariants }
   ```

NOTE: Check existing CSS Modules for custom variants and map them appropriately.
  </action>
  <verify>
   - Alert.tsx and Badge.tsx no longer import CSS Modules
   - Alert shows correct colors for each variant
   - Badge shows correct colors and styling
   - role="alert" present on Alert for accessibility
  </verify>
  <done>Alert and Badge components migrated to Tailwind + CVA</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Modal component (preserve Framer Motion)</name>
  <files>
    src/components/Modal.tsx
  </files>
  <action>
1. Read current Modal.tsx and Modal.module.css carefully - Modal likely uses Framer Motion for animations

2. Create Tailwind-based Modal preserving animation:

   ```typescript
   import { forwardRef, useEffect } from "react"
   import { motion, AnimatePresence } from "framer-motion"
   import { cn } from "@/lib/utils"

   interface ModalProps {
     isOpen: boolean
     onClose: () => void
     children: React.ReactNode
     className?: string
     overlayClassName?: string
   }

   const Modal = forwardRef<HTMLDivElement, ModalProps>(
     ({ isOpen, onClose, children, className, overlayClassName }, ref) => {
       // Handle escape key
       useEffect(() => {
         const handleEscape = (e: KeyboardEvent) => {
           if (e.key === "Escape") onClose()
         }
         if (isOpen) {
           document.addEventListener("keydown", handleEscape)
           document.body.style.overflow = "hidden"
         }
         return () => {
           document.removeEventListener("keydown", handleEscape)
           document.body.style.overflow = "unset"
         }
       }, [isOpen, onClose])

       return (
         <AnimatePresence>
           {isOpen && (
             <>
               {/* Backdrop */}
               <motion.div
                 initial={{ opacity: 0 }}
                 animate={{ opacity: 1 }}
                 exit={{ opacity: 0 }}
                 onClick={onClose}
                 className={cn(
                   "fixed inset-0 z-50 bg-black/80",
                   overlayClassName
                 )}
               />
               {/* Content */}
               <motion.div
                 ref={ref}
                 initial={{ opacity: 0, scale: 0.95 }}
                 animate={{ opacity: 1, scale: 1 }}
                 exit={{ opacity: 0, scale: 0.95 }}
                 className={cn(
                   "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg",
                   className
                 )}
               >
                 {children}
               </motion.div>
             </>
           )}
         </AnimatePresence>
       )
     }
   )
   Modal.displayName = "Modal"

   export default Modal
   export { Modal }
   ```

NOTE: Preserve existing props interface. Check Modal.module.css for any specific styling details.
  </action>
  <verify>
   - Modal.tsx no longer imports Modal.module.css
   - Modal opens/closes with animation
   - Backdrop click closes modal
   - Escape key closes modal
   - Body scroll locked when modal open
   - Modal centered on screen
  </verify>
  <done>Modal component migrated to Tailwind with Framer Motion animations preserved</done>
</task>

<task type="auto">
  <name>Task 3: Migrate Spinner, Avatar, and Caption components</name>
  <files>
    src/components/Spinner.tsx
    src/components/Avatar.tsx
    src/components/Caption.tsx
  </files>
  <action>
1. Create Tailwind-based Spinner with animation:

   ```typescript
   import { cn } from "@/lib/utils"

   interface SpinnerProps {
     size?: "sm" | "md" | "lg"
     className?: string
   }

   const sizeClasses = {
     sm: "h-4 w-4",
     md: "h-8 w-8",
     lg: "h-12 w-12",
   }

   const Spinner = ({ size = "md", className }: SpinnerProps) => {
     return (
       <div
         className={cn(
           "animate-spin rounded-full border-2 border-current border-t-transparent text-primary",
           sizeClasses[size],
           className
         )}
         role="status"
         aria-label="Loading"
       >
         <span className="sr-only">Loading...</span>
       </div>
     )
   }

   export default Spinner
   export { Spinner }
   ```

2. Create Tailwind-based Avatar with fallback:

   ```typescript
   import { cn } from "@/lib/utils"
   import { useState } from "react"

   interface AvatarProps {
     src?: string
     alt?: string
     fallback?: string
     size?: "sm" | "md" | "lg" | "xl"
     className?: string
   }

   const sizeClasses = {
     sm: "h-8 w-8",
     md: "h-10 w-10",
     lg: "h-12 w-12",
     xl: "h-16 w-16",
   }

   const Avatar = ({
     src,
     alt = "",
     fallback,
     size = "md",
     className,
   }: AvatarProps) => {
     const [imageError, setImageError] = useState(false)

     const showFallback = !src || imageError

     return (
       <div
         className={cn(
           "relative flex shrink-0 overflow-hidden rounded-full bg-muted",
           sizeClasses[size],
           className
         )}
       >
         {showFallback ? (
           <span className="flex h-full w-full items-center justify-center bg-muted text-sm font-medium text-muted-foreground">
             {fallback || alt?.charAt(0)?.toUpperCase() || "?"}
           </span>
         ) : (
           <img
             src={src}
             alt={alt}
             onError={() => setImageError(true)}
             className="aspect-square h-full w-full object-cover"
           />
         )}
       </div>
     )
   }

   export default Avatar
   export { Avatar }
   ```

3. Create Tailwind-based Caption:

   ```typescript
   import { cn } from "@/lib/utils"

   interface CaptionProps extends React.HTMLAttributes<HTMLElement> {
     as?: "figcaption" | "span" | "p"
   }

   const Caption = ({
     as: Component = "figcaption",
     className,
     children,
     ...props
   }: CaptionProps) => {
     return (
       <Component
         className={cn("text-sm text-muted-foreground", className)}
         {...props}
       >
         {children}
       </Component>
     )
   }

   export default Caption
   export { Caption }
   ```

4. Commit all feedback component migrations:
   ```bash
   git add -A
   git commit -m "refactor(01-05): migrate feedback components to Tailwind

   - Alert: CVA variants for success, error, warning, info with accessible role
   - Badge: CVA variants for multiple styles
   - Modal: Framer Motion animations, backdrop, escape handling
   - Spinner: CSS animate-spin, accessible loading indicator
   - Avatar: Image with fallback, multiple sizes
   - Caption: Muted text styling for figure captions

   Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
   ```
  </action>
  <verify>
   - All six components no longer import CSS Modules
   - Spinner animation visible
   - Avatar shows fallback when image fails
   - Caption styled with muted color
   - `npm run dev` shows all components correctly
  </verify>
  <done>Spinner, Avatar, Caption migrated; all feedback components now use Tailwind</done>
</task>

</tasks>

<verification>
Run after all tasks complete:

1. Component testing:
   - Alert: Render each variant (success, error, warning, info)
   - Badge: Render each variant
   - Modal: Open/close, escape key, backdrop click
   - Spinner: Animation working
   - Avatar: With image, without image (fallback shows)
   - Caption: Renders with muted text

2. Accessibility:
   - Alert has role="alert"
   - Spinner has role="status" and sr-only text
   - Modal traps focus (if implemented)

3. Integration:
   - Any page using these components still works
</verification>

<success_criteria>
- All six feedback components use Tailwind instead of CSS Modules
- Alert and Badge CVA variants work correctly
- Modal animations and interactions preserved
- Spinner animation smooth and visible
- Avatar fallback works
- No accessibility regressions
</success_criteria>

<output>
After completion, create `.planning/phases/01-tailwind-migration/01-05-SUMMARY.md`
</output>
