---
phase: 01-tailwind-migration
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - vite.config.ts
  - src/styles/globals.css
  - src/lib/utils.ts
  - components.json
  - src/main.tsx
autonomous: true

must_haves:
  truths:
    - "Developer can use Tailwind utility classes in any component"
    - "Developer can import cn() from @/lib/utils"
    - "Developer can run `npx shadcn@latest add button` successfully"
    - "Tailwind CSS variables are accessible via CSS custom properties"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "Tailwind CSS entry point with theme tokens"
      contains: "@import \"tailwindcss\""
    - path: "src/lib/utils.ts"
      provides: "cn() utility for class composition"
      exports: ["cn"]
    - path: "components.json"
      provides: "shadcn/ui configuration"
      contains: "\"style\": \"new-york\""
  key_links:
    - from: "vite.config.ts"
      to: "@tailwindcss/vite"
      via: "plugin configuration"
      pattern: "tailwindcss\\(\\)"
    - from: "src/main.tsx"
      to: "src/styles/globals.css"
      via: "CSS import"
      pattern: "import.*globals\\.css"
    - from: "src/lib/utils.ts"
      to: "clsx"
      via: "import"
      pattern: "import.*clsx"
---

<objective>
Install and configure Tailwind CSS v4 with shadcn/ui foundation

Purpose: Establish the CSS framework and component library infrastructure that all subsequent component migrations will use. This creates the theming system, utility functions, and shadcn/ui CLI access.

Output: Working Tailwind CSS v4 with theme tokens, cn() utility, and shadcn/ui ready for component additions.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-tailwind-migration/01-RESEARCH.md

# Prior plan output - Vite is now configured
@.planning/phases/01-tailwind-migration/01-01-SUMMARY.md

# Current files to understand structure
@vite.config.ts
@src/main.tsx
@src/variables.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Tailwind CSS v4 and dependencies</name>
  <files>
    package.json
    vite.config.ts
  </files>
  <action>
1. Install Tailwind CSS v4 and the Vite plugin:
   ```bash
   npm install tailwindcss @tailwindcss/vite
   ```

2. Install shadcn/ui dependencies (will be used by CLI):
   ```bash
   npm install class-variance-authority clsx tailwind-merge lucide-react
   ```

3. Update vite.config.ts to add Tailwind plugin:
   ```typescript
   import path from "path"
   import tailwindcss from "@tailwindcss/vite"
   import react from "@vitejs/plugin-react"
   import tsconfigPaths from "vite-tsconfig-paths"
   import svgr from "vite-plugin-svgr"
   import { defineConfig } from "vite"

   export default defineConfig({
     plugins: [
       react(),
       tailwindcss(),  // Add Tailwind plugin
       tsconfigPaths(),
       svgr(),
     ],
     resolve: {
       alias: {
         "@": path.resolve(__dirname, "./src"),
       },
     },
     server: {
       port: 3000,
       open: true,
     },
     build: {
       outDir: "build",
       sourcemap: true,
     },
     publicDir: "public",
   })
   ```

NOTE: Tailwind v4 uses @tailwindcss/vite plugin, NOT PostCSS configuration.
  </action>
  <verify>
   - tailwindcss and @tailwindcss/vite in package.json dependencies
   - vite.config.ts includes tailwindcss() plugin
   - `npm run dev` still starts without errors
  </verify>
  <done>Tailwind CSS v4 and dependencies installed, Vite plugin configured</done>
</task>

<task type="auto">
  <name>Task 2: Create global CSS with Tailwind theme</name>
  <files>
    src/styles/globals.css
    src/main.tsx
  </files>
  <action>
1. Create src/styles/ directory if it doesn't exist

2. Create src/styles/globals.css with Tailwind v4 CSS-first configuration:
   ```css
   @import "tailwindcss";

   /*
    * Theme Configuration (Tailwind v4 CSS-first approach)
    * These CSS variables are used by both Tailwind utilities and components
    */
   @theme {
     /* Color tokens using oklch (Tailwind v4 default) */
     --color-background: oklch(1 0 0);
     --color-foreground: oklch(0.145 0 0);
     --color-card: oklch(1 0 0);
     --color-card-foreground: oklch(0.145 0 0);
     --color-popover: oklch(1 0 0);
     --color-popover-foreground: oklch(0.145 0 0);
     --color-primary: oklch(0.205 0 0);
     --color-primary-foreground: oklch(0.985 0 0);
     --color-secondary: oklch(0.97 0 0);
     --color-secondary-foreground: oklch(0.205 0 0);
     --color-muted: oklch(0.97 0 0);
     --color-muted-foreground: oklch(0.556 0 0);
     --color-accent: oklch(0.97 0 0);
     --color-accent-foreground: oklch(0.205 0 0);
     --color-destructive: oklch(0.577 0.245 27.325);
     --color-destructive-foreground: oklch(0.985 0 0);
     --color-border: oklch(0.922 0 0);
     --color-input: oklch(0.922 0 0);
     --color-ring: oklch(0.708 0 0);

     /* Border radius tokens */
     --radius-lg: 0.625rem;
     --radius-md: 0.5rem;
     --radius-sm: 0.375rem;
     --radius-xl: 1rem;
     --radius-2xl: 1.5rem;

     /* Animation tokens (for later motion work) */
     --animate-duration: 200ms;
     --animate-ease: cubic-bezier(0.4, 0, 0.2, 1);
   }

   /* Dark mode overrides - prepared for future use */
   .dark {
     --color-background: oklch(0.145 0 0);
     --color-foreground: oklch(0.985 0 0);
     --color-card: oklch(0.205 0 0);
     --color-card-foreground: oklch(0.985 0 0);
     --color-popover: oklch(0.205 0 0);
     --color-popover-foreground: oklch(0.985 0 0);
     --color-primary: oklch(0.985 0 0);
     --color-primary-foreground: oklch(0.205 0 0);
     --color-secondary: oklch(0.269 0 0);
     --color-secondary-foreground: oklch(0.985 0 0);
     --color-muted: oklch(0.269 0 0);
     --color-muted-foreground: oklch(0.708 0 0);
     --color-accent: oklch(0.269 0 0);
     --color-accent-foreground: oklch(0.985 0 0);
     --color-destructive: oklch(0.396 0.141 25.723);
     --color-destructive-foreground: oklch(0.637 0.237 25.331);
     --color-border: oklch(0.269 0 0);
     --color-input: oklch(0.269 0 0);
     --color-ring: oklch(0.439 0 0);
   }

   /* Base layer styles */
   @layer base {
     * {
       @apply border-border;
     }
     body {
       @apply bg-background text-foreground;
       font-feature-settings: "rlig" 1, "calt" 1;
     }
   }
   ```

3. Update src/main.tsx to import globals.css:
   ```typescript
   import React from 'react';
   import ReactDOM from 'react-dom/client';
   import './styles/globals.css';  // Tailwind + theme
   import './index.module.css';    // Keep existing for now (gradual migration)
   import './variables.css';       // Keep existing CSS variables for now
   import App from './App';
   import { HelmetProvider } from 'react-helmet-async';

   const root = ReactDOM.createRoot(
     document.getElementById('root') as HTMLElement
   );
   root.render(
     <React.StrictMode>
       <HelmetProvider>
         <App />
       </HelmetProvider>
     </React.StrictMode>
   );
   ```

NOTE: We keep existing CSS imports during migration. They'll be removed when all components are migrated.
  </action>
  <verify>
   - src/styles/globals.css exists with @import "tailwindcss"
   - src/main.tsx imports globals.css
   - `npm run dev` shows app with Tailwind classes working
   - Test: Add `className="text-red-500"` to any element and verify red text appears
  </verify>
  <done>Tailwind CSS globals configured with theme tokens, imported in main.tsx</done>
</task>

<task type="auto">
  <name>Task 3: Create utilities and shadcn/ui configuration</name>
  <files>
    src/lib/utils.ts
    components.json
    tsconfig.json
  </files>
  <action>
1. Create src/lib/ directory if it doesn't exist

2. Create src/lib/utils.ts with cn() utility:
   ```typescript
   import { clsx, type ClassValue } from "clsx"
   import { twMerge } from "tailwind-merge"

   /**
    * Combines class names using clsx and resolves Tailwind conflicts with tailwind-merge
    * Usage: cn("px-4 py-2", condition && "bg-primary", className)
    */
   export function cn(...inputs: ClassValue[]) {
     return twMerge(clsx(inputs))
   }
   ```

3. Ensure tsconfig.json has path aliases for @ imports:
   ```json
   {
     "compilerOptions": {
       // ... existing options ...
       "baseUrl": ".",
       "paths": {
         "@/*": ["./src/*"]
       }
     }
   }
   ```

4. Create components.json for shadcn/ui CLI:
   ```json
   {
     "$schema": "https://ui.shadcn.com/schema.json",
     "style": "new-york",
     "rsc": false,
     "tsx": true,
     "tailwind": {
       "config": "",
       "css": "src/styles/globals.css",
       "baseColor": "neutral",
       "cssVariables": true,
       "prefix": ""
     },
     "aliases": {
       "components": "@/components",
       "utils": "@/lib/utils",
       "ui": "@/components/ui",
       "lib": "@/lib",
       "hooks": "@/hooks"
     },
     "iconLibrary": "lucide"
   }
   ```

5. Test the setup:
   ```bash
   # Verify cn() works by importing in a test file
   # Verify shadcn CLI recognizes the project
   npx shadcn@latest add --help
   ```

6. Commit changes:
   ```bash
   git add -A
   git commit -m "build(01-02): add Tailwind CSS v4 and shadcn/ui foundation

   - Install tailwindcss, @tailwindcss/vite, CVA, clsx, tailwind-merge
   - Create globals.css with Tailwind v4 CSS-first theme
   - Create cn() utility for class composition
   - Add components.json for shadcn/ui CLI
   - Configure path aliases for @/ imports

   Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
   ```
  </action>
  <verify>
   - src/lib/utils.ts exists and exports cn()
   - components.json exists at project root
   - tsconfig.json has @ path alias
   - `npx shadcn@latest add --help` shows available commands
   - Import `import { cn } from "@/lib/utils"` works in any component
  </verify>
  <done>cn() utility created, shadcn/ui CLI configured, path aliases working</done>
</task>

</tasks>

<verification>
Run after all tasks complete:

1. Tailwind classes work: Add `className="bg-primary text-primary-foreground p-4 rounded-md"` to a div and verify styling
2. cn() utility works: `cn("px-4", "px-8")` returns "px-8" (tailwind-merge resolves conflict)
3. shadcn/ui CLI works: `npx shadcn@latest add button --dry-run` shows what would be added
4. Theme tokens work: `className="bg-background text-foreground"` uses CSS variables
5. Dev server runs without errors: `npm run dev`
6. Existing CSS Modules still work (we haven't removed them yet)
</verification>

<success_criteria>
- Tailwind CSS v4 utilities available in all components
- Theme tokens (colors, radii) defined and accessible
- cn() utility ready for component composition
- shadcn/ui CLI can add components to src/components/ui/
- No visual regressions (existing CSS Modules coexist with Tailwind)
</success_criteria>

<output>
After completion, create `.planning/phases/01-tailwind-migration/01-02-SUMMARY.md`
</output>
