---
phase: 06-layout-primitives
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/layout/Bleed.tsx
  - src/components/layout/Container.tsx
  - src/components/layout/index.ts
autonomous: true

must_haves:
  truths:
    - "Developer can import Bleed from @/components/layout"
    - "Developer can import Container from @/components/layout"
    - "Bleed extends content to full viewport width"
    - "Container constrains content to max-width with horizontal padding"
  artifacts:
    - path: "src/components/layout/Bleed.tsx"
      provides: "Full-width breakout component"
      exports: ["Bleed"]
    - path: "src/components/layout/Container.tsx"
      provides: "Max-width content constraint component"
      exports: ["Container", "containerVariants"]
    - path: "src/components/layout/index.ts"
      provides: "Complete barrel export for all layout primitives"
      exports: ["Stack", "Cluster", "Grid", "Bleed", "Container"]
  key_links:
    - from: "src/components/layout/Bleed.tsx"
      to: "viewport width"
      via: "w-screen with translate transform"
      pattern: "w-screen.*-translate-x-1/2"
---

<objective>
Create Bleed and Container layout primitives for intentional grid breaks.

Purpose: Bleed allows content to break out of contained layouts to full viewport width (hero images, featured sections). Container provides consistent max-width constraints with horizontal padding. Together they enable the "full-bleed within contained layout" pattern from LAYT-02.

Output: Bleed and Container components in src/components/layout/
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-layout-primitives/06-RESEARCH.md

Reference patterns:
@src/components/Surface.tsx (CVA pattern)
@src/components/layout/Stack.tsx (if exists from Plan 01)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Bleed component</name>
  <files>src/components/layout/Bleed.tsx</files>
  <action>
Create Bleed.tsx for full-width breakout:

1. Import cn from @/lib/utils

2. Define BleedProps interface:
   - children: React.ReactNode
   - className?: string
   - as?: React.ElementType (default "div")

3. Component uses the established full-bleed pattern:
   ```tsx
   const Bleed = ({ children, className, as: Component = 'div' }: BleedProps) => (
     <Component
       className={cn(
         // Full-width breakout technique
         "relative left-1/2 w-screen -translate-x-1/2",
         className
       )}
     >
       {children}
     </Component>
   );
   ```

4. Export Bleed as default and named

Note: This uses w-screen which can cause scrollbar issues. The research notes suggest testing w-dvw as an alternative. For now, use w-screen as it has wider browser support. Add a comment noting this.

Warning comment to add:
```tsx
// Note: w-screen can cause horizontal scrollbar when vertical scrollbar is present.
// Alternative: w-dvw (dynamic viewport width) has better behavior but less browser support.
// If scrollbar issues occur, either use w-dvw or add overflow-x: hidden to body.
```
  </action>
  <verify>TypeScript compiles: npx tsc --noEmit src/components/layout/Bleed.tsx</verify>
  <done>Bleed component extends content to full viewport width</done>
</task>

<task type="auto">
  <name>Task 2: Create Container component</name>
  <files>src/components/layout/Container.tsx</files>
  <action>
Create Container.tsx for max-width content constraint:

1. Import cva, VariantProps from class-variance-authority
2. Import cn from @/lib/utils

3. Define containerVariants with CVA:
   - Base: "mx-auto w-full"
   - size variants:
     - sm: "max-w-screen-sm" (640px)
     - md: "max-w-screen-md" (768px)
     - lg: "max-w-screen-lg" (1024px)
     - xl: "max-w-screen-xl" (1280px)
     - 2xl: "max-w-screen-2xl" (1536px)
     - prose: "max-w-prose" (~65ch, good for reading)
     - full: "max-w-full" (no constraint)
   - padding variants:
     - none: "px-0"
     - sm: "px-4"
     - md: "px-6"
     - lg: "px-8"
   - defaultVariants: size: "xl", padding: "md"

4. Define ContainerProps interface:
   - children: React.ReactNode
   - size?: variant type
   - padding?: variant type
   - as?: React.ElementType (default "div")
   - className?: string

5. Create Container component with polymorphic as prop

6. Export Container as default and named, export containerVariants
  </action>
  <verify>TypeScript compiles: npx tsc --noEmit src/components/layout/Container.tsx</verify>
  <done>Container component constrains content with configurable max-width and padding</done>
</task>

<task type="auto">
  <name>Task 3: Update barrel export with all primitives</name>
  <files>src/components/layout/index.ts</files>
  <action>
Complete the barrel export with all layout primitives:

```typescript
// Flow layout primitives
export { Stack, stackVariants } from "./Stack";
export { Cluster, clusterVariants } from "./Cluster";

// Grid layout primitive
export { Grid, gridVariants } from "./Grid";

// Containment primitives
export { Bleed } from "./Bleed";
export { Container, containerVariants } from "./Container";
```

Export relevant types for external consumption.
  </action>
  <verify>npm run build passes</verify>
  <done>All 5 layout primitives importable from @/components/layout</done>
</task>

</tasks>

<verification>
1. npm run build passes without errors
2. All 5 components importable: Stack, Cluster, Grid, Bleed, Container
3. Bleed renders content at full viewport width
4. Container constrains content to specified max-width
</verification>

<success_criteria>
- Bleed component breaks content out to full viewport width
- Container component constrains content with max-width and horizontal padding
- Both components support polymorphic `as` prop
- Build passes with no TypeScript errors
- All layout primitives (Stack, Cluster, Grid, Bleed, Container) importable from single location
</success_criteria>

<output>
After completion, create `.planning/phases/06-layout-primitives/06-03-SUMMARY.md`
</output>
