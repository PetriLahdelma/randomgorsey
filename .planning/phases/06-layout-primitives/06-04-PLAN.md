---
phase: 06-layout-primitives
plan: 04
type: execute
wave: 2
depends_on: ["06-01", "06-02", "06-03"]
files_modified:
  - src/stories/layout/Stack.stories.tsx
  - src/stories/layout/Cluster.stories.tsx
  - src/stories/layout/Grid.stories.tsx
  - src/stories/layout/Bleed.stories.tsx
  - src/stories/layout/Container.stories.tsx
autonomous: true

must_haves:
  truths:
    - "Developer can see Stack component in Storybook with interactive controls"
    - "Developer can see Cluster component in Storybook with interactive controls"
    - "Developer can see Grid component in Storybook demonstrating container queries"
    - "Developer can see Bleed component in Storybook showing full-width breakout"
    - "Developer can see Container component in Storybook with size/padding controls"
  artifacts:
    - path: "src/stories/layout/Stack.stories.tsx"
      provides: "Stack component Storybook documentation"
      min_lines: 50
    - path: "src/stories/layout/Cluster.stories.tsx"
      provides: "Cluster component Storybook documentation"
      min_lines: 50
    - path: "src/stories/layout/Grid.stories.tsx"
      provides: "Grid component Storybook documentation"
      min_lines: 60
    - path: "src/stories/layout/Bleed.stories.tsx"
      provides: "Bleed component Storybook documentation"
      min_lines: 40
    - path: "src/stories/layout/Container.stories.tsx"
      provides: "Container component Storybook documentation"
      min_lines: 50
  key_links:
    - from: "src/stories/layout/*.stories.tsx"
      to: "src/components/layout"
      via: "component imports"
      pattern: "from.*@/components/layout"
---

<objective>
Create comprehensive Storybook documentation for all layout primitives with interactive controls.

Purpose: Per project constraints, every component must have a 1:1 Storybook story. These stories serve as living documentation showing how to use each layout primitive with various configurations.

Output: 5 Storybook story files in src/stories/layout/
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-layout-primitives/06-RESEARCH.md

Reference patterns:
@src/stories/Surface.stories.tsx (StoryObj format, autodocs)
@src/stories/RevealOnScroll.stories.tsx (complex component story)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Stack and Cluster stories</name>
  <files>
    src/stories/layout/Stack.stories.tsx
    src/stories/layout/Cluster.stories.tsx
  </files>
  <action>
Create Stack.stories.tsx:

```typescript
import type { Meta, StoryObj } from "@storybook/react";
import { Stack } from "@/components/layout";

const meta: Meta<typeof Stack> = {
  title: "Layout/Stack",
  component: Stack,
  tags: ["autodocs"],
  argTypes: {
    gap: {
      control: { type: "select" },
      options: ["none", "xs", "sm", "md", "lg", "xl", "2xl", "section"],
    },
    align: {
      control: { type: "select" },
      options: ["start", "center", "end", "stretch"],
    },
    as: {
      control: { type: "text" },
      description: "HTML element to render as",
    },
  },
};

export default meta;
type Story = StoryObj<typeof meta>;
```

Stories to include:
- Default: Basic usage with colored boxes
- GapScale: Shows all gap sizes
- Alignment: Shows all align options
- AsSection: Demonstrates polymorphic as="section"

Create Cluster.stories.tsx with similar structure:
- Default: Basic horizontal items
- GapScale: Shows all gap sizes
- Justify: Shows all justify options
- Align: Shows all align options
- TagList: Real-world example with tags/badges
  </action>
  <verify>npm run storybook -- --smoke-test (or start Storybook and verify stories render)</verify>
  <done>Stack and Cluster stories exist with interactive controls</done>
</task>

<task type="auto">
  <name>Task 2: Create Grid story with container query demo</name>
  <files>src/stories/layout/Grid.stories.tsx</files>
  <action>
Create Grid.stories.tsx with container query demonstration:

```typescript
import type { Meta, StoryObj } from "@storybook/react";
import { Grid } from "@/components/layout";

const meta: Meta<typeof Grid> = {
  title: "Layout/Grid",
  component: Grid,
  tags: ["autodocs"],
  argTypes: {
    gap: {
      control: { type: "select" },
      options: ["sm", "md", "lg", "xl"],
    },
    columns: {
      control: { type: "select" },
      options: ["auto", "1", "2", "3", "4"],
    },
    minItemWidth: {
      control: { type: "text" },
      description: "Min width for auto-fit (e.g., 250px)",
    },
  },
};

export default meta;
type Story = StoryObj<typeof meta>;
```

Stories to include:
- Default: 6 card items with columns="auto"
- FixedColumns: columns="3" regardless of container
- AutoFit: minItemWidth="200px" for intrinsic sizing
- ContainerQueryDemo: Grid inside resizable container to show responsiveness

For ContainerQueryDemo, wrap in a resizable div:
```tsx
export const ContainerQueryDemo: Story = {
  render: () => (
    <div className="space-y-4">
      <p className="text-sm text-muted-foreground">
        Resize the container below to see the grid respond to container width, not viewport.
      </p>
      <div
        className="resize-x overflow-auto border border-dashed border-muted p-4 min-w-[200px] max-w-full"
        style={{ width: '600px' }}
      >
        <Grid columns="auto" gap="md">
          {[1, 2, 3, 4, 5, 6].map((n) => (
            <div key={n} className="bg-muted p-4 rounded text-center">
              Item {n}
            </div>
          ))}
        </Grid>
      </div>
    </div>
  ),
};
```

This demonstrates LAYT-03 (container queries) visually.
  </action>
  <verify>Storybook renders Grid stories, ContainerQueryDemo is resizable</verify>
  <done>Grid story demonstrates container query responsiveness</done>
</task>

<task type="auto">
  <name>Task 3: Create Bleed and Container stories</name>
  <files>
    src/stories/layout/Bleed.stories.tsx
    src/stories/layout/Container.stories.tsx
  </files>
  <action>
Create Bleed.stories.tsx:

```typescript
import type { Meta, StoryObj } from "@storybook/react";
import { Bleed, Container } from "@/components/layout";

const meta: Meta<typeof Bleed> = {
  title: "Layout/Bleed",
  component: Bleed,
  tags: ["autodocs"],
  decorators: [
    (Story) => (
      <Container size="md" padding="md">
        <div className="space-y-4">
          <p>Content inside Container (max-width constrained)</p>
          <Story />
          <p>More content after the Bleed</p>
        </div>
      </Container>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof meta>;
```

Stories to include:
- Default: Full-bleed background section
- HeroImage: Demonstrates full-bleed image
- BleedWithinContainer: Shows the breakout effect

Create Container.stories.tsx:

```typescript
import type { Meta, StoryObj } from "@storybook/react";
import { Container } from "@/components/layout";

const meta: Meta<typeof Container> = {
  title: "Layout/Container",
  component: Container,
  tags: ["autodocs"],
  argTypes: {
    size: {
      control: { type: "select" },
      options: ["sm", "md", "lg", "xl", "2xl", "prose", "full"],
    },
    padding: {
      control: { type: "select" },
      options: ["none", "sm", "md", "lg"],
    },
  },
};

export default meta;
type Story = StoryObj<typeof meta>;
```

Stories to include:
- Default: xl size with md padding
- SizeScale: Shows all size options side by side
- Prose: Demonstrates max-w-prose for reading
- NestedWithBleed: Container with Bleed child (shows the pattern)
  </action>
  <verify>npm run storybook -- --smoke-test</verify>
  <done>Bleed and Container stories exist showing full-width breakout pattern</done>
</task>

</tasks>

<verification>
1. npm run storybook starts without errors
2. All 5 layout primitive stories appear under "Layout" category
3. Interactive controls work for all variant props
4. ContainerQueryDemo demonstrates responsive behavior based on container
5. Bleed stories demonstrate full-width breakout within contained layouts
</verification>

<success_criteria>
- All 5 layout primitives have Storybook stories (1:1 per project constraint)
- Stories have interactive controls via argTypes
- Stories use StoryObj format with autodocs tag
- ContainerQueryDemo visually proves container query responsiveness
- Bleed stories demonstrate LAYT-02 (intentional grid breaks)
</success_criteria>

<output>
After completion, create `.planning/phases/06-layout-primitives/06-04-SUMMARY.md`
</output>
