---
phase: 06-layout-primitives
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/layout/Grid.tsx
  - src/components/layout/index.ts
autonomous: true

must_haves:
  truths:
    - "Developer can import Grid from @/components/layout"
    - "Grid creates responsive columns based on container width (not viewport)"
    - "Grid column count adjusts automatically when container resizes"
  artifacts:
    - path: "src/components/layout/Grid.tsx"
      provides: "Container-query responsive grid component"
      exports: ["Grid", "gridVariants"]
    - path: "src/components/layout/index.ts"
      provides: "Updated barrel export including Grid"
      exports: ["Stack", "Cluster", "Grid"]
  key_links:
    - from: "src/components/layout/Grid.tsx"
      to: "Tailwind @container"
      via: "@container class on wrapper"
      pattern: "@container"
---

<objective>
Create Grid layout primitive with Tailwind v4 native container query support.

Purpose: The Grid component enables responsive layouts that adapt to their container width rather than viewport width. This is critical for components that need to work in different layout contexts (sidebars, main content, modals).

Output: Grid component in src/components/layout/ with container query responsiveness
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-layout-primitives/06-RESEARCH.md

Reference patterns:
@src/components/Surface.tsx (CVA pattern)
@src/components/layout/Stack.tsx (if exists from Plan 01)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Grid component with container queries</name>
  <files>src/components/layout/Grid.tsx</files>
  <action>
Create Grid.tsx with container query support:

1. Import cva, VariantProps from class-variance-authority
2. Import cn from @/lib/utils

3. Define gridVariants with CVA for inner grid:
   - Base: "grid"
   - gap variants: sm (gap-2), md (gap-4), lg (gap-6), xl (gap-8)
   - defaultVariants: gap: "md"

4. Define GridProps interface:
   - children: React.ReactNode
   - gap?: variant type
   - columns?: 'auto' | '1' | '2' | '3' | '4' (for fixed column counts)
   - minItemWidth?: string (e.g., "250px" for auto-fit)
   - className?: string
   - containerClassName?: string (for @container wrapper)

5. Component structure:
   ```tsx
   // Outer wrapper establishes container query context
   <div className={cn("@container", containerClassName)}>
     {/* Inner grid responds to container size */}
     <div className={cn(
       gridVariants({ gap }),
       // If columns='auto', use container query breakpoints:
       columns === 'auto' && "grid-cols-1 @sm:grid-cols-2 @lg:grid-cols-3 @xl:grid-cols-4",
       // Or use fixed column counts:
       columns === '1' && "grid-cols-1",
       columns === '2' && "grid-cols-2",
       columns === '3' && "grid-cols-3",
       columns === '4' && "grid-cols-4",
       // Or use auto-fit with minItemWidth:
       minItemWidth && `grid-cols-[repeat(auto-fit,minmax(${minItemWidth},1fr))]`,
       className
     )}>
       {children}
     </div>
   </div>
   ```

6. Default to columns='auto' for container-query responsive behavior

7. Export Grid as default and named, export gridVariants

Important: The @container class MUST be on the outer wrapper, not the grid itself. Child container queries query the nearest ancestor with @container.
  </action>
  <verify>TypeScript compiles: npx tsc --noEmit src/components/layout/Grid.tsx</verify>
  <done>Grid component exists with container query responsiveness and multiple column modes</done>
</task>

<task type="auto">
  <name>Task 2: Update barrel export</name>
  <files>src/components/layout/index.ts</files>
  <action>
Add Grid to the barrel export:

```typescript
export { Stack, stackVariants } from "./Stack";
export { Cluster, clusterVariants } from "./Cluster";
export { Grid, gridVariants } from "./Grid";
```

Export Grid types for external consumption.
  </action>
  <verify>npm run build passes</verify>
  <done>Grid importable from @/components/layout</done>
</task>

</tasks>

<verification>
1. npm run build passes without errors
2. Grid is importable from src/components/layout
3. Grid wraps content with @container class
4. Grid responds to container width using @sm, @lg, @xl breakpoints
</verification>

<success_criteria>
- Grid component creates responsive columns based on container width
- Container queries work (not viewport queries)
- Multiple column modes supported: auto (container query), fixed (1-4), and auto-fit (minItemWidth)
- Build passes with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-layout-primitives/06-02-SUMMARY.md`
</output>
