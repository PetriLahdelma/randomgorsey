---
phase: 02-token-architecture
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/tokens/semantic.css
autonomous: true

must_haves:
  truths:
    - "Semantic background/foreground tokens reference primitive neutrals"
    - "Semantic surface tokens exist for card-like elements"
    - "Semantic interactive tokens (primary, secondary, accent) exist"
    - "Semantic feedback tokens (destructive, success) exist"
    - "Semantic spacing tokens (page, section, element, inline) exist"
    - "Dark mode overrides all semantic color tokens"
  artifacts:
    - path: "src/styles/tokens/semantic.css"
      provides: ":root semantic token mappings"
      contains: ":root"
      min_lines: 60
  key_links:
    - from: "src/styles/tokens/semantic.css"
      to: "primitives.css"
      via: "var() references"
      pattern: "var\\(--color-neutral"
---

<objective>
Create the semantic token layer that maps primitive values to meaningful design concepts.

Purpose: Semantic tokens give meaning to primitives. Instead of using `bg-neutral-950`, components use `bg-background`. This layer enables section-scoped overrides - sections redefine semantic tokens, not primitive usage.

Output: `src/styles/tokens/semantic.css` with :root semantic mappings and .dark overrides.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-token-architecture/02-RESEARCH.md
@src/styles/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create semantic.css with color mappings</name>
  <files>src/styles/tokens/semantic.css</files>
  <action>
Create `src/styles/tokens/semantic.css` with :root selector containing semantic token mappings:

**Background/Foreground (references to primitives):**
```css
--color-background: var(--color-neutral-50);
--color-foreground: var(--color-neutral-950);
```

**Surface tokens (for cards, panels, elevated UI):**
```css
--color-surface: var(--color-neutral-100);
--color-surface-foreground: var(--color-neutral-900);
--color-surface-elevated: var(--color-white);
--color-surface-elevated-foreground: var(--color-neutral-950);
```

**Interactive tokens:**
```css
--color-primary: var(--color-neutral-900);
--color-primary-foreground: var(--color-neutral-50);
--color-secondary: var(--color-neutral-200);
--color-secondary-foreground: var(--color-neutral-900);
--color-accent: var(--color-yellow-400);
--color-accent-foreground: var(--color-neutral-950);
```

**Feedback tokens:**
```css
--color-destructive: var(--color-red-500);
--color-destructive-foreground: var(--color-neutral-50);
--color-success: var(--color-green-500);
--color-success-foreground: var(--color-neutral-50);
```

**UI element tokens:**
```css
--color-border: var(--color-neutral-200);
--color-input: var(--color-neutral-200);
--color-ring: var(--color-neutral-400);
--color-muted: var(--color-neutral-100);
--color-muted-foreground: var(--color-neutral-500);
```

**Card/Popover (for shadcn/ui compatibility):**
```css
--color-card: var(--color-surface-elevated);
--color-card-foreground: var(--color-surface-elevated-foreground);
--color-popover: var(--color-surface-elevated);
--color-popover-foreground: var(--color-surface-elevated-foreground);
```

**Semantic spacing:**
```css
--space-page: calc(var(--spacing) * 6);      /* 1.5rem - page padding */
--space-section: calc(var(--spacing) * 16);  /* 4rem - between sections */
--space-element: calc(var(--spacing) * 4);   /* 1rem - between elements */
--space-inline: calc(var(--spacing) * 2);    /* 0.5rem - inline spacing */
```

Add header comment explaining this is the semantic layer that references primitives.
  </action>
  <verify>
```bash
cat src/styles/tokens/semantic.css | grep ":root" # Should find :root selector
cat src/styles/tokens/semantic.css | grep "var(--color-neutral" | wc -l # Should be >= 10
cat src/styles/tokens/semantic.css | grep "space-section" # Should find semantic spacing
```
  </verify>
  <done>semantic.css contains :root with all semantic color mappings referencing primitives, plus semantic spacing tokens</done>
</task>

<task type="auto">
  <name>Task 2: Add dark mode overrides</name>
  <files>src/styles/tokens/semantic.css</files>
  <action>
Add .dark selector to semantic.css with inverted semantic mappings:

```css
.dark {
  /* Inverted background/foreground */
  --color-background: var(--color-neutral-950);
  --color-foreground: var(--color-neutral-50);

  /* Surface tokens */
  --color-surface: var(--color-neutral-900);
  --color-surface-foreground: var(--color-neutral-100);
  --color-surface-elevated: var(--color-neutral-800);
  --color-surface-elevated-foreground: var(--color-neutral-50);

  /* Interactive tokens */
  --color-primary: var(--color-neutral-50);
  --color-primary-foreground: var(--color-neutral-900);
  --color-secondary: var(--color-neutral-800);
  --color-secondary-foreground: var(--color-neutral-100);
  /* accent stays the same - yellow pops on both */

  /* UI elements */
  --color-border: var(--color-neutral-800);
  --color-input: var(--color-neutral-800);
  --color-ring: var(--color-neutral-600);
  --color-muted: var(--color-neutral-800);
  --color-muted-foreground: var(--color-neutral-400);

  /* Card/Popover */
  --color-card: var(--color-surface-elevated);
  --color-card-foreground: var(--color-surface-elevated-foreground);
  --color-popover: var(--color-surface-elevated);
  --color-popover-foreground: var(--color-surface-elevated-foreground);
}
```

Note: Feedback colors (destructive, success) remain the same in dark mode - they're absolute, not inverted.
  </action>
  <verify>
```bash
grep ".dark" src/styles/tokens/semantic.css # Should find .dark selector
grep -A 5 ".dark" src/styles/tokens/semantic.css | grep "neutral-950" # Background inverts
```
  </verify>
  <done>.dark selector defines inverted semantic mappings for dark mode</done>
</task>

</tasks>

<verification>
- [ ] `src/styles/tokens/semantic.css` exists
- [ ] :root selector contains all semantic color mappings
- [ ] Semantic tokens reference primitives via var()
- [ ] .dark selector inverts appropriate tokens
- [ ] Semantic spacing tokens defined
- [ ] Card/popover tokens for shadcn/ui compatibility
</verification>

<success_criteria>
1. File `src/styles/tokens/semantic.css` exists
2. Contains :root with semantic tokens referencing primitives
3. Contains .dark with inverted semantic mappings
4. All color references use var(--color-*) syntax
5. Semantic spacing uses calc() with --spacing primitive
</success_criteria>

<output>
After completion, create `.planning/phases/02-token-architecture/02-02-SUMMARY.md`
</output>
