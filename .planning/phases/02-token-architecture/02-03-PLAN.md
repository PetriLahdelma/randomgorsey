---
phase: 02-token-architecture
plan: 03
type: execute
wave: 2
depends_on: ["02-01", "02-02"]
files_modified:
  - src/styles/tokens/sections.css
  - src/styles/globals.css
autonomous: true

must_haves:
  truths:
    - "Hero section has dark background with light foreground"
    - "Gallery section has light, airy background"
    - "Listen section has moody purple-tinted background"
    - "Contact section has clean white background"
    - "About section has warm off-white background"
    - "Sections override semantic tokens, not utility classes"
    - "Utilities always win over section styles (cascade layers)"
  artifacts:
    - path: "src/styles/tokens/sections.css"
      provides: "[data-section] scoped token overrides"
      contains: "data-section"
      min_lines: 40
    - path: "src/styles/globals.css"
      provides: "Token imports and @layer organization"
      contains: "@import"
  key_links:
    - from: "src/styles/tokens/sections.css"
      to: "semantic.css"
      via: "overrides semantic vars"
      pattern: "--color-background"
    - from: "src/styles/globals.css"
      to: "src/styles/tokens/"
      via: "@import statements"
      pattern: "@import.*tokens"
---

<objective>
Create section-scoped token overrides and integrate all token layers into globals.css with proper cascade organization.

Purpose: Section tokens give each page area (hero, gallery, listen, etc.) its own visual personality by overriding semantic tokens. This completes the three-layer architecture and enables FOUND-02 (section personality system).

Output: `src/styles/tokens/sections.css` with data-section overrides, and refactored `globals.css` that imports all token files.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-token-architecture/02-RESEARCH.md
@.planning/phases/02-token-architecture/02-01-SUMMARY.md
@.planning/phases/02-token-architecture/02-02-SUMMARY.md
@src/styles/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create sections.css with data-section overrides</name>
  <files>src/styles/tokens/sections.css</files>
  <action>
Create `src/styles/tokens/sections.css` with section-scoped token overrides in @layer base:

```css
/*
 * Section Token Overrides
 *
 * Each [data-section] selector overrides semantic tokens to create
 * distinct visual personalities. Use data-section="name" on container
 * elements to apply these overrides.
 *
 * Layer: base (utilities will always override these)
 */
@layer base {
  /* Hero section - dramatic, high contrast, dark */
  [data-section="hero"] {
    --color-background: var(--color-neutral-950);
    --color-foreground: var(--color-neutral-50);
    --color-surface: var(--color-neutral-900);
    --color-surface-foreground: var(--color-neutral-100);
    --color-accent: var(--color-yellow-400);
    --color-accent-foreground: var(--color-neutral-950);
    --color-muted: var(--color-neutral-800);
    --color-muted-foreground: var(--color-neutral-400);
    --color-border: var(--color-neutral-800);
    --space-section: calc(var(--spacing) * 24);  /* Extra breathing room */
  }

  /* Gallery section - light, airy, spacious */
  [data-section="gallery"] {
    --color-background: var(--color-neutral-100);
    --color-foreground: var(--color-neutral-900);
    --color-surface: var(--color-white);
    --color-surface-foreground: var(--color-neutral-950);
    --color-accent: var(--color-magenta-500);
    --color-accent-foreground: var(--color-white);
    --color-border: var(--color-neutral-200);
    --space-element: calc(var(--spacing) * 6);  /* More space between images */
  }

  /* Listen section - moody, immersive, purple-tinted */
  [data-section="listen"] {
    --color-background: oklch(0.12 0.015 280);  /* Slight purple tint */
    --color-foreground: var(--color-neutral-100);
    --color-surface: oklch(0.18 0.02 280);
    --color-surface-foreground: var(--color-neutral-50);
    --color-accent: var(--color-blue-500);
    --color-accent-foreground: var(--color-white);
    --color-muted: oklch(0.22 0.015 280);
    --color-muted-foreground: var(--color-neutral-400);
    --color-border: oklch(0.25 0.02 280);
  }

  /* Contact section - professional, clean, white */
  [data-section="contact"] {
    --color-background: var(--color-white);
    --color-foreground: var(--color-neutral-900);
    --color-surface: var(--color-neutral-50);
    --color-surface-foreground: var(--color-neutral-800);
    --color-primary: var(--color-neutral-950);
    --color-primary-foreground: var(--color-white);
    --color-border: var(--color-neutral-200);
  }

  /* About section - warm, personal, inviting */
  [data-section="about"] {
    --color-background: oklch(0.98 0.01 60);  /* Warm off-white */
    --color-foreground: var(--color-neutral-900);
    --color-surface: var(--color-white);
    --color-surface-foreground: var(--color-neutral-900);
    --color-accent: oklch(0.72 0.14 50);  /* Warm orange accent */
    --color-accent-foreground: var(--color-neutral-950);
    --color-border: oklch(0.90 0.02 60);
  }

  /* Discography section - similar to listen but distinct */
  [data-section="discography"] {
    --color-background: var(--color-neutral-950);
    --color-foreground: var(--color-neutral-100);
    --color-surface: var(--color-neutral-900);
    --color-surface-foreground: var(--color-neutral-50);
    --color-accent: var(--color-magenta-400);
    --color-accent-foreground: var(--color-neutral-950);
  }

  /* Base section styles - applies to all sections */
  [data-section] {
    background-color: var(--color-background);
    color: var(--color-foreground);
  }
}
```

Add header comment explaining section token overrides and the data-section pattern.
  </action>
  <verify>
```bash
grep "data-section" src/styles/tokens/sections.css | wc -l # Should be >= 7
grep "@layer base" src/styles/tokens/sections.css # Should find @layer base
grep "hero" src/styles/tokens/sections.css # Should find hero section
grep "gallery" src/styles/tokens/sections.css # Should find gallery section
grep "listen" src/styles/tokens/sections.css # Should find listen section
```
  </verify>
  <done>sections.css contains @layer base with [data-section] overrides for hero, gallery, listen, contact, about, and discography</done>
</task>

<task type="auto">
  <name>Task 2: Refactor globals.css to import token files</name>
  <files>src/styles/globals.css</files>
  <action>
Refactor `src/styles/globals.css` to:

1. Keep @import "tailwindcss" at the top
2. Keep @font-face declarations (they must stay in globals.css for font loading)
3. Import token files in correct order:
   - @import "./tokens/primitives.css"
   - @import "./tokens/semantic.css"
   - @import "./tokens/sections.css"
4. Remove the @theme block (moved to primitives.css)
5. Remove the .dark block (moved to semantic.css)
6. Keep @layer base with body/heading/code styles
7. Keep @layer utilities with font utility classes

Final structure:
```css
@import "tailwindcss";

/* Token imports - order matters for cascade */
@import "./tokens/primitives.css";
@import "./tokens/semantic.css";
@import "./tokens/sections.css";

/* Font face declarations */
@font-face { ... }

/* Base layer styles */
@layer base {
  * { @apply border-border; }
  body { ... }
  h1-h6 { ... }
  code { ... }
}

/* Custom utility classes */
@layer utilities {
  .font-tschick-bold { ... }
  .font-europa { ... }
  .font-europa-bold { ... }
  .font-europa-light { ... }
}
```

IMPORTANT:
- Do NOT duplicate tokens that are now in separate files
- Keep only font-face, base layer body/heading styles, and utility classes
- The @theme directive is now in primitives.css only
  </action>
  <verify>
```bash
# Verify imports are present
grep '@import "./tokens/primitives.css"' src/styles/globals.css
grep '@import "./tokens/semantic.css"' src/styles/globals.css
grep '@import "./tokens/sections.css"' src/styles/globals.css

# Verify @theme is removed from globals.css (should NOT find it)
grep "@theme" src/styles/globals.css || echo "@theme removed successfully"

# Verify font-face still present
grep "@font-face" src/styles/globals.css

# Verify base layer still present
grep "@layer base" src/styles/globals.css
```
  </verify>
  <done>globals.css imports all token files in correct order, @theme moved to primitives.css, .dark moved to semantic.css, base/utilities layers retained</done>
</task>

<task type="auto">
  <name>Task 3: Verify build and cascade behavior</name>
  <files>src/styles/globals.css, src/styles/tokens/primitives.css, src/styles/tokens/semantic.css, src/styles/tokens/sections.css</files>
  <action>
Verify the token architecture works correctly:

1. Run `npm run build` to ensure CSS compiles without errors
2. Run `npm run dev` and check browser console for CSS errors
3. Verify Tailwind utilities are generated from primitives (bg-neutral-950, text-yellow-400, etc.)

Test cascade behavior conceptually:
- Primitives (@theme) create utilities AND CSS variables
- Semantics (:root) reference primitives via var()
- Sections (@layer base) override semantics for [data-section] elements
- Utilities (@layer utilities) always win over section styles

No runtime test needed - cascade layers are deterministic.
  </action>
  <verify>
```bash
# Build should succeed
npm run build

# Check for any CSS parsing errors in build output
npm run build 2>&1 | grep -i "error" || echo "No CSS errors"

# Verify token files exist and have content
wc -l src/styles/tokens/*.css
```
  </verify>
  <done>Build succeeds, no CSS errors, all token files properly integrated</done>
</task>

</tasks>

<verification>
- [ ] `src/styles/tokens/sections.css` exists with [data-section] overrides
- [ ] `globals.css` imports all token files in correct order
- [ ] @theme directive exists ONLY in primitives.css
- [ ] .dark selector exists ONLY in semantic.css
- [ ] [data-section] overrides are in @layer base
- [ ] Build succeeds without CSS errors
- [ ] Font-face declarations still work
- [ ] Base layer body/heading styles still apply
</verification>

<success_criteria>
1. Three token files exist: primitives.css, semantic.css, sections.css
2. globals.css imports all three in correct cascade order
3. Each section (hero, gallery, listen, contact, about, discography) has distinct token overrides
4. `npm run build` succeeds
5. No @theme duplication between files
6. Tailwind utilities work (bg-background, text-foreground, bg-neutral-950)
</success_criteria>

<output>
After completion, create `.planning/phases/02-token-architecture/02-03-SUMMARY.md`
</output>
