---
phase: 02-token-architecture
plan: 04
type: execute
wave: 3
depends_on: ["02-03"]
files_modified:
  - src/styles/tokens/primitives.css
  - src/pages/Home.tsx
  - src/pages/Gallery.tsx
  - src/pages/Listen.tsx
  - src/pages/Contact.tsx
  - src/pages/About.tsx
  - src/pages/Discography.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "User sees different visual personalities when navigating between sections"
    - "Developer can override semantic tokens at section level via data-section attributes"
    - "Pages with CSS Modules continue to render correctly (no missing colors)"
  artifacts:
    - path: "src/styles/tokens/primitives.css"
      provides: "Legacy color aliases for CSS Module compatibility"
      contains: "--color-yellow"
    - path: "src/pages/Home.tsx"
      provides: "data-section attribute on container"
      contains: "data-section"
    - path: "src/pages/Gallery.tsx"
      provides: "data-section attribute on container"
      contains: "data-section"
    - path: "src/pages/Listen.tsx"
      provides: "data-section attribute on container"
      contains: "data-section"
    - path: "src/pages/Contact.tsx"
      provides: "data-section attribute on container"
      contains: "data-section"
    - path: "src/pages/About.tsx"
      provides: "data-section attribute on container"
      contains: "data-section"
    - path: "src/pages/Discography.tsx"
      provides: "data-section attribute on container"
      contains: "data-section"
  key_links:
    - from: "src/pages/Home.tsx"
      to: "src/styles/tokens/sections.css"
      via: "data-section='hero' attribute"
      pattern: "data-section=\"hero\""
    - from: "src/pages/Gallery.tsx"
      to: "src/styles/tokens/sections.css"
      via: "data-section='gallery' attribute"
      pattern: "data-section=\"gallery\""
    - from: "src/styles/tokens/primitives.css"
      to: "CSS Modules"
      via: "Legacy color aliases"
      pattern: "--color-yellow.*--color-yellow-400"
---

<objective>
Wire the section token layer to page components and add legacy color aliases for CSS Module compatibility.

Purpose: The section token overrides in sections.css are complete but orphaned - no page elements use the `data-section` attribute. This plan adds the attributes to page containers so section personalities take effect. It also adds legacy color variable aliases so existing CSS Modules continue to work during the gradual migration.

Output: All page containers have data-section attributes, legacy colors are aliased in primitives.css, and section visual personalities are active.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-token-architecture/02-03-SUMMARY.md
@.planning/phases/02-token-architecture/02-VERIFICATION.md
@src/styles/tokens/primitives.css
@src/styles/tokens/sections.css
@src/variables.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add legacy color aliases to primitives.css</name>
  <files>src/styles/tokens/primitives.css</files>
  <action>
Add legacy color variable aliases to `src/styles/tokens/primitives.css` at the END of the @theme block (before the closing brace). These aliases allow existing CSS Modules to continue working while the codebase gradually migrates to semantic tokens.

Add this section before the closing `}` of @theme:

```css
  /* ========================================
   * LEGACY COLOR ALIASES
   * Bridge for CSS Modules during migration
   * Maps old variable names to new primitives
   * TODO: Remove after Phase 3+ page migration
   * ======================================== */
  --color-yellow: var(--color-yellow-400);
  --color-magenta: var(--color-magenta-500);
  --color-blue: oklch(0.45 0.31 264);  /* Pure blue #00f in oklch */
  --color-green: oklch(0.87 0.35 142);  /* Pure green #0f0 in oklch */
  --color-orange: oklch(0.80 0.15 75);  /* Warm orange for discography */
  --color-gray: var(--color-neutral-300);
  --color-gray-medium: var(--color-neutral-500);
  --color-gray-dark: var(--color-neutral-600);
  --color-gray-light: var(--color-neutral-200);
  --color-light-bg: var(--color-neutral-50);
  --color-blue-light: oklch(0.55 0.22 255);  /* #007bff equivalent */
  --color-red: oklch(0.577 0.245 27.325);  /* Same as red-500 */
  --color-dark: var(--color-neutral-800);
```

IMPORTANT:
- Add INSIDE @theme block so these become CSS variables
- Place at the end, after existing semantic tokens
- Use oklch format for pure colors (blue, green) to match token system
- Reference existing primitive tokens where possible (var(--color-neutral-300))
  </action>
  <verify>
```bash
# Verify legacy aliases are present
grep -E "--color-yellow:|--color-magenta:|--color-blue:|--color-green:|--color-orange:" src/styles/tokens/primitives.css

# Verify they're inside @theme
grep -A 5 "LEGACY COLOR ALIASES" src/styles/tokens/primitives.css

# Build should still succeed
npm run build 2>&1 | grep -i "error" || echo "Build successful"
```
  </verify>
  <done>Legacy color aliases added to primitives.css, CSS Modules will render correctly</done>
</task>

<task type="auto">
  <name>Task 2: Add data-section attributes to page containers</name>
  <files>src/pages/Home.tsx, src/pages/Gallery.tsx, src/pages/Listen.tsx, src/pages/Contact.tsx, src/pages/About.tsx, src/pages/Discography.tsx</files>
  <action>
Add `data-section` attributes to the main container element in each page component. The attribute value should match the section name defined in sections.css.

**Home.tsx:**
Find the Container element (line ~94-95):
```tsx
<Container
  className={styles["home-container"]}
  data-section="hero"
  ...
```

**Gallery.tsx:**
Find the Container element (line ~91-92):
```tsx
<Container
  className={styles['gallery-container']}
  data-section="gallery"
  ...
```

**Listen.tsx:**
Find the container element and add:
```tsx
data-section="listen"
```

**Contact.tsx:**
Find the container element and add:
```tsx
data-section="contact"
```

**About.tsx:**
Find the container element and add:
```tsx
data-section="about"
```

**Discography.tsx:**
Find the container element and add:
```tsx
data-section="discography"
```

IMPORTANT:
- Add `data-section` as a prop on the outermost container element (the one with the CSS Module class)
- The attribute is a standard HTML data attribute, React handles it automatically
- Keep the existing className, add data-section alongside it
- For motion.div/Container elements, the prop is passed through to the DOM element
  </action>
  <verify>
```bash
# Verify data-section attributes are present in each page
grep -l "data-section" src/pages/Home.tsx src/pages/Gallery.tsx src/pages/Listen.tsx src/pages/Contact.tsx src/pages/About.tsx src/pages/Discography.tsx

# Count total data-section occurrences
grep -c "data-section" src/pages/*.tsx | grep -v ":0"

# Build should succeed
npm run build
```
  </verify>
  <done>All 6 page containers have data-section attributes, section token overrides now take effect</done>
</task>

</tasks>

<verification>
- [ ] `src/styles/tokens/primitives.css` contains legacy color aliases (--color-yellow, --color-blue, etc.)
- [ ] `src/pages/Home.tsx` has `data-section="hero"` on container
- [ ] `src/pages/Gallery.tsx` has `data-section="gallery"` on container
- [ ] `src/pages/Listen.tsx` has `data-section="listen"` on container
- [ ] `src/pages/Contact.tsx` has `data-section="contact"` on container
- [ ] `src/pages/About.tsx` has `data-section="about"` on container
- [ ] `src/pages/Discography.tsx` has `data-section="discography"` on container
- [ ] `npm run build` succeeds without errors
- [ ] CSS Modules still reference working color variables (no broken colors)
</verification>

<success_criteria>
1. All 6 pages have data-section attributes on their container elements
2. Legacy color variables (--color-yellow, --color-blue, --color-magenta, --color-green, --color-orange) are defined in primitives.css
3. `npm run build` succeeds
4. Navigating between pages shows different visual personalities (hero is dark, gallery is light, listen is moody, etc.)
5. CSS Module colors render correctly (yellow text, blue backgrounds, etc.)
</success_criteria>

<output>
After completion, create `.planning/phases/02-token-architecture/02-04-SUMMARY.md`
</output>
