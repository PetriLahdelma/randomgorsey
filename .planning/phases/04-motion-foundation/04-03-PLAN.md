---
phase: 04-motion-foundation
plan: 03
type: execute
wave: 3
depends_on: ["04-01", "04-02"]
files_modified:
  - src/pages/Home.tsx
  - src/pages/About.tsx
  - src/pages/Contact.tsx
  - src/pages/Discography.tsx
  - src/pages/Gallery.tsx
  - src/pages/Listen.tsx
  - src/pages/NotFound.tsx
autonomous: true

must_haves:
  truths:
    - "User sees consistent page enter animations across all pages"
    - "User with prefers-reduced-motion enabled sees opacity-only transitions (no y movement)"
    - "No pages use isIOS() to conditionally disable animations"
  artifacts:
    - path: "src/pages/Home.tsx"
      provides: "Home page with centralized motion variants"
      contains: "pageVariants"
    - path: "src/pages/About.tsx"
      provides: "About page with centralized motion variants"
      contains: "pageVariants"
    - path: "src/pages/Contact.tsx"
      provides: "Contact page with centralized motion variants"
      contains: "pageVariants"
    - path: "src/pages/Discography.tsx"
      provides: "Discography page with centralized motion variants"
      contains: "pageVariants"
    - path: "src/pages/Gallery.tsx"
      provides: "Gallery page with centralized motion variants"
      contains: "pageVariants"
    - path: "src/pages/Listen.tsx"
      provides: "Listen page with centralized motion variants"
      contains: "pageVariants"
    - path: "src/pages/NotFound.tsx"
      provides: "NotFound page with centralized motion variants"
      contains: "pageVariants"
  key_links:
    - from: "src/pages/*.tsx"
      to: "@/lib/motion"
      via: "import { motion, pageVariants }"
      pattern: "import.*pageVariants.*from.*@/lib/motion"
---

<objective>
Migrate all 7 page components from isIOS-conditional inline animations to centralized pageVariants.

Purpose: Replace device-specific animation disabling with proper prefers-reduced-motion handling, ensuring consistent animations via centralized variants.
Output: All pages use `motion.div` with `pageVariants`, isIOS pattern removed entirely.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-motion-foundation/04-RESEARCH.md
@.planning/phases/04-motion-foundation/04-01-SUMMARY.md
@.planning/phases/04-motion-foundation/04-02-SUMMARY.md

Current pattern (in all 7 pages):
```typescript
import { isIOS } from "../utils/isIOS";
const Container: React.ElementType = isIOS() ? "div" : motion.div;
<Container {...(!isIOS() && { initial: {...}, animate: {...}, transition: {...} })}>
```

Target pattern:
```typescript
import { motion, pageVariants } from '@/lib/motion';
<motion.div variants={pageVariants} initial="initial" animate="enter">
```
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Home.tsx to centralized variants</name>
  <files>src/pages/Home.tsx</files>
  <action>
Update `src/pages/Home.tsx`:

1. **Remove isIOS import**: Delete `import { isIOS } from "../utils/isIOS";`

2. **Update motion import**: Change `import { motion } from "framer-motion";` to:
   ```typescript
   import { motion, pageVariants } from '@/lib/motion';
   ```

3. **Remove Container pattern**: Delete the line:
   ```typescript
   const Container: React.ElementType = isIOS() ? "div" : motion.div;
   ```

4. **Replace Container usage** with motion.div + variants:
   ```typescript
   <motion.div
     className={styles["home-container"]}
     data-section="hero"
     variants={pageVariants}
     initial="initial"
     animate="enter"
   >
   ```

5. **Remove conditional props**: Delete the spread `{...(!isIOS() && {...})}`

The page should now use `motion.div` unconditionally. The AnimationProvider handles reduced-motion accessibility automatically.
  </action>
  <verify>No isIOS reference: `grep -c "isIOS" src/pages/Home.tsx || echo "0"`</verify>
  <done>Home.tsx uses pageVariants from @/lib/motion, no isIOS import</done>
</task>

<task type="auto">
  <name>Task 2: Migrate remaining 6 pages to centralized variants</name>
  <files>src/pages/About.tsx, src/pages/Contact.tsx, src/pages/Discography.tsx, src/pages/Gallery.tsx, src/pages/Listen.tsx, src/pages/NotFound.tsx</files>
  <action>
Apply the same migration pattern to all remaining pages:

**For each page (About, Contact, Discography, Gallery, Listen, NotFound):**

1. **Remove isIOS import**: Delete `import { isIOS } from "../utils/isIOS";`

2. **Update motion import** to use @/lib/motion:
   ```typescript
   import { motion, pageVariants } from '@/lib/motion';
   ```

3. **Remove Container pattern**: Delete the conditional ElementType assignment

4. **Replace Container JSX** with motion.div + variants:
   ```typescript
   <motion.div
     variants={pageVariants}
     initial="initial"
     animate="enter"
     // preserve existing className and data-section attributes
   >
   ```

5. **Remove conditional animation props**

**Page-specific notes:**
- **Gallery.tsx**: May have additional motion elements beyond page container - only update the main page wrapper, preserve any gallery-specific animations
- **Contact.tsx**: Preserve any form-specific animations or state
- **Discography.tsx**: Preserve any list/card animations

Each page's main container should use `pageVariants` with `initial="initial"` and `animate="enter"`.
  </action>
  <verify>No isIOS in any page: `grep -l "isIOS" src/pages/*.tsx || echo "none"`</verify>
  <done>All 6 remaining pages use pageVariants from @/lib/motion, no isIOS imports</done>
</task>

<task type="auto">
  <name>Task 3: Verify build and isIOS cleanup</name>
  <files>None (verification only)</files>
  <action>
Verification steps:

1. **Run build** to confirm no compilation errors:
   ```bash
   npm run build
   ```

2. **Verify no isIOS references in pages**:
   ```bash
   grep -r "isIOS" src/pages/ && echo "FAIL: isIOS still used" || echo "PASS: isIOS removed"
   ```

3. **Verify pageVariants usage** in all pages:
   ```bash
   grep -l "pageVariants" src/pages/*.tsx | wc -l
   # Should output 7
   ```

4. **Verify import path consistency**:
   ```bash
   grep "@/lib/motion" src/pages/*.tsx
   # All pages should use this import path
   ```

Note: The `src/utils/isIOS.ts` file can be deleted in a future cleanup task if it's no longer used elsewhere. For now, focus on removing it from pages.
  </action>
  <verify>Build passes and all pages migrated: `npm run build 2>&1 | tail -3`</verify>
  <done>Build passes, all pages use centralized motion system</done>
</task>

</tasks>

<verification>
1. Build: `npm run build 2>&1 | grep -i error || echo "Build passed"`
2. No isIOS in pages: `grep -r "isIOS" src/pages/ || echo "Clean"`
3. All pages use variants: `grep -c "pageVariants" src/pages/*.tsx`
4. Visual test: Run `npm run dev`, navigate between pages - animations should be smooth and consistent
5. Reduced motion test: Enable prefers-reduced-motion in DevTools, verify animations are simplified
</verification>

<success_criteria>
- All 7 pages import from @/lib/motion
- All 7 pages use pageVariants with initial/animate props
- No isIOS imports in any page file
- Build compiles without errors
- Animations work correctly in browser
</success_criteria>

<output>
After completion, create `.planning/phases/04-motion-foundation/04-03-SUMMARY.md`
</output>
