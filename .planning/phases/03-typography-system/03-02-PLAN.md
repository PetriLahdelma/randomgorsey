---
phase: 03-typography-system
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - src/components/Heading.tsx
  - src/components/Text.tsx
  - src/styles/tokens/primitives.css
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User sees h1-h6 headings scale fluidly from mobile to desktop without breakpoint jumps"
    - "User sees body text scale fluidly at all viewport sizes"
    - "User sees consistent visual hierarchy across all pages"
  artifacts:
    - path: "src/components/Heading.tsx"
      provides: "Heading component with token-based fluid sizing"
      contains: "text-5xl"
    - path: "src/components/Text.tsx"
      provides: "Text component with token-based fluid sizing"
      contains: "text-base"
    - path: "src/styles/tokens/primitives.css"
      provides: "Unified Europa font-family token"
      contains: "--font-family-europa-unified"
  key_links:
    - from: "src/components/Heading.tsx"
      to: "typography.css tokens"
      via: "Tailwind text-* classes"
      pattern: "text-(5xl|4xl|3xl|2xl|xl|lg)"
    - from: "src/components/Text.tsx"
      to: "typography.css tokens"
      via: "Tailwind text-* classes"
      pattern: "text-(base|sm|xs|lg)"
---

<objective>
Update typography components to use fluid token-based sizing

Purpose: Connect the Heading and Text components to the typography token system, replacing hardcoded clamp() values and fixed sizes with the centralized fluid scale from typography.css.

Output: Updated Heading.tsx and Text.tsx components using typography tokens, updated primitives.css with unified font token
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-typography-system/03-RESEARCH.md

# Prior plan summary (typography tokens created)
@.planning/phases/03-typography-system/03-01-SUMMARY.md

# Components to update
@src/components/Heading.tsx
@src/components/Text.tsx

# Typography tokens (created in 03-01)
@src/styles/tokens/typography.css
@src/styles/tokens/primitives.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update primitives.css with unified font token</name>
  <files>src/styles/tokens/primitives.css</files>
  <action>
Add the unified Europa font-family token to the @theme block in primitives.css.

Add after the existing font-family primitives (around line 80):

  /* Unified Europa family - uses weight axis */
  --font-family-europa-unified: "Europa", ui-sans-serif, system-ui, sans-serif;

This token references the unified "Europa" @font-face declarations created in 03-01, allowing components to use font-weight classes (font-light, font-normal, font-bold) instead of separate font-family names.

Also add a font-display token for reference:
  --font-display: "Tschick Bold", ui-sans-serif, system-ui, sans-serif;

This creates a semantic alias that components can use for display/heading typography.
  </action>
  <verify>
grep "--font-family-europa-unified" src/styles/tokens/primitives.css returns a match.
grep "--font-display" src/styles/tokens/primitives.css returns a match.
npm run build completes without errors.
  </verify>
  <done>
primitives.css contains unified Europa font-family token and font-display alias for Tschick.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Heading component to use fluid typography tokens</name>
  <files>src/components/Heading.tsx</files>
  <action>
Update the headingVariants CVA definition to use the typography tokens instead of hardcoded clamp() values.

Replace the current level variants with token-based sizing:

```typescript
level: {
  // Maps to --text-6xl: clamp(2.281rem, 1.85rem + 2.16vw, 4.032rem)
  1: "text-6xl",
  // Maps to --text-5xl: clamp(2.027rem, 1.69rem + 1.69vw, 3.36rem)
  2: "text-5xl",
  // Maps to --text-4xl: clamp(1.802rem, 1.54rem + 1.31vw, 2.8rem)
  3: "text-4xl",
  // Maps to --text-3xl: clamp(1.602rem, 1.4rem + 1.01vw, 2.333rem)
  4: "text-3xl",
  // Maps to --text-2xl: clamp(1.424rem, 1.27rem + 0.77vw, 1.944rem)
  5: "text-2xl",
  // Maps to --text-xl: clamp(1.266rem, 1.15rem + 0.58vw, 1.62rem)
  6: "text-xl",
},
```

Remove the inline clamp() values and leading-* classes. The typography tokens include --line-height values that Tailwind v4 automatically applies.

Update the base classes to remove hardcoded leading:
```typescript
"m-0 font-tschick-bold tracking-[0.08em]"
```

Note: Tailwind v4's @theme handles line-height via --text-*--line-height tokens automatically when using text-* utilities.

Keep all other variants (tone, align, weight) unchanged.

Add a JSDoc comment explaining the token mapping:
```typescript
/**
 * Heading component with fluid typography
 * Uses typography tokens from src/styles/tokens/typography.css
 * Each level maps to a fluid clamp() value that scales smoothly
 * between mobile (400px) and desktop (1280px) viewports
 */
```
  </action>
  <verify>
grep -c "text-6xl" src/components/Heading.tsx returns 1.
grep -c "clamp" src/components/Heading.tsx returns 0 (no more inline clamp).
npm run build completes without errors.
Run npm run storybook and verify Heading stories render correctly at different viewport sizes.
  </verify>
  <done>
Heading component uses typography tokens (text-6xl through text-xl) for all 6 levels, with fluid scaling at all viewport sizes.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update Text component to use fluid typography tokens</name>
  <files>src/components/Text.tsx</files>
  <action>
Update the textVariants CVA definition to use typography tokens for fluid sizing.

Replace the current variant sizes with token-based sizing:

```typescript
variant: {
  // Maps to --text-base: clamp(1rem, 0.95rem + 0.25vw, 1.125rem)
  body: "text-base",
  // Maps to --text-sm: clamp(0.8rem, 0.75rem + 0.25vw, 1rem)
  bodySmall: "text-sm",
  // Maps to --text-xs: clamp(0.64rem, 0.6rem + 0.2vw, 0.8rem)
  // Keep tracking-[0.02em] for caption styling
  caption: "text-xs tracking-[0.02em]",
  // Keep text-xs with uppercase and wider tracking for eyebrow
  eyebrow: "text-xs uppercase tracking-[0.25em]",
},
```

Update the base classes to remove fixed leading (let tokens handle it):
```typescript
"m-0 font-europa"
```

The typography tokens include appropriate line-heights, so we don't need to specify leading-[1.6] in the base.

Add a JSDoc comment explaining the token mapping:
```typescript
/**
 * Text component with fluid typography
 * Uses typography tokens from src/styles/tokens/typography.css
 * All variants scale fluidly between mobile and desktop viewports
 */
```

Keep all other variants (tone, align, weight) unchanged.
  </action>
  <verify>
grep -c "text-base" src/components/Text.tsx returns 1 (in variant definition).
grep -c "text-\\[0.95rem\\]" src/components/Text.tsx returns 0 (no more arbitrary values).
npm run build completes without errors.
Run npm run storybook and verify Text stories render correctly.
  </verify>
  <done>
Text component uses typography tokens (text-base, text-sm, text-xs) for all variants, with fluid scaling.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Build verification:
   ```bash
   npm run build
   ```
   Should complete without errors.

2. No hardcoded typography sizes in components:
   ```bash
   grep -c "clamp" src/components/Heading.tsx
   grep -c "text-\\[" src/components/Text.tsx
   ```
   Both should return 0 (except for tracking-[*] which is intentional).

3. Token usage confirmed:
   ```bash
   grep "text-6xl\|text-5xl\|text-4xl" src/components/Heading.tsx
   grep "text-base\|text-sm\|text-xs" src/components/Text.tsx
   ```
   Should show token class usage.

4. Storybook verification:
   ```bash
   npm run storybook
   ```
   - Open Heading stories, resize viewport - text should scale smoothly
   - Open Text stories, resize viewport - text should scale smoothly
   - No visual regressions from previous sizing

5. Visual regression check:
   - Run npm run dev
   - Navigate to Home page with hero heading
   - Resize browser from mobile to desktop
   - Confirm h1 scales fluidly without jumps
</verification>

<success_criteria>
1. Heading component uses text-6xl through text-xl for levels 1-6
2. Text component uses text-base, text-sm, text-xs for body variants
3. No hardcoded clamp() or arbitrary text-[*] sizes in components
4. Build passes without errors
5. Storybook renders correctly
6. Typography scales fluidly when resizing viewport
</success_criteria>

<output>
After completion, create `.planning/phases/03-typography-system/03-02-SUMMARY.md`
</output>
