---
phase: 03-typography-system
plan: 03
type: execute
wave: 3
depends_on: ["03-02"]
files_modified:
  - src/styles/globals.css
  - src/pages/Home.module.css
  - src/pages/Discography.module.css
  - src/pages/Gallery.module.css
  - src/pages/Contact.module.css
  - src/pages/About.module.css
  - src/pages/Listen.module.css
  - src/pages/NotFound.module.css
autonomous: true
user_setup: []
gap_closure: true

must_haves:
  truths:
    - "User sees typography scale fluidly from mobile to desktop without breakpoint jumps on ALL pages"
    - "Developer can use clamp()-based sizing for any h1-h6 element without explicit classes"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "Base layer h1-h6 with fluid text-* classes"
      contains: "text-6xl"
    - path: "src/pages/Home.module.css"
      provides: "CSS Module without fixed font-size overrides on h1"
      excludes: "font-size: 1.2rem"
    - path: "src/pages/Discography.module.css"
      provides: "CSS Module without fixed font-size overrides"
      excludes: "font-size: 1.5rem"
    - path: "src/pages/Gallery.module.css"
      provides: "CSS Module without fixed font-size overrides"
      excludes: "font-size: 1.8rem"
  key_links:
    - from: "src/styles/globals.css"
      to: "src/styles/tokens/typography.css"
      via: "text-* utility classes applied to h1-h6"
      pattern: "h1.*text-6xl"
    - from: "Page h1-h6 elements"
      to: "Base layer fluid sizing"
      via: "CSS cascade (base layer provides defaults)"
      pattern: "@layer base.*h1.*text-"
---

<objective>
Close typography gaps: Apply fluid tokens to base h1-h6 elements and remove fixed font-size overrides from page CSS Modules

Purpose: Ensure ALL page headings automatically use the fluid typography token system, fulfilling the phase goal that users see typography scale fluidly without breakpoint jumps.

Output: Updated globals.css with fluid h1-h6 styling, cleaned page CSS Modules without conflicting fixed font-sizes
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-typography-system/03-VERIFICATION.md

# Prior plan summaries
@.planning/phases/03-typography-system/03-01-SUMMARY.md
@.planning/phases/03-typography-system/03-02-SUMMARY.md

# Files to modify
@src/styles/globals.css
@src/styles/tokens/typography.css

# Page CSS Modules with anti-patterns
@src/pages/Home.module.css
@src/pages/Discography.module.css
@src/pages/Gallery.module.css
@src/pages/Contact.module.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply fluid typography to base h1-h6 in globals.css</name>
  <files>src/styles/globals.css</files>
  <action>
Update the @layer base block in globals.css to apply fluid typography tokens to all h1-h6 elements.

Replace the current h1-h6 styling (lines 106-110):
```css
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-tschick-bold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
```

With individual heading rules that apply the correct text-* size tokens:
```css
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-tschick-bold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
/* Fluid typography scale applied to native heading elements
 * This ensures ALL pages get fluid typography without needing
 * to migrate to <Heading> components
 * Scale: text-6xl -> text-xl (matches Heading component)
 */
h1 {
  @apply text-6xl;
}
h2 {
  @apply text-5xl;
}
h3 {
  @apply text-4xl;
}
h4 {
  @apply text-3xl;
}
h5 {
  @apply text-2xl;
}
h6 {
  @apply text-xl;
}
```

This mirrors the Heading component's token mapping:
- h1 -> text-6xl (clamp(2.281rem, 1.85rem + 2.16vw, 4.032rem))
- h2 -> text-5xl
- h3 -> text-4xl
- h4 -> text-3xl
- h5 -> text-2xl
- h6 -> text-xl

The @apply directive brings in the clamp() value AND the paired line-height from the typography tokens.
  </action>
  <verify>
grep "h1" src/styles/globals.css shows "text-6xl" applied.
grep "@apply text-" src/styles/globals.css returns 6 matches (one per heading level).
npm run build completes without errors.
  </verify>
  <done>
Base h1-h6 elements have fluid typography tokens applied via @apply directives, making all native headings responsive.
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove fixed font-size overrides from page CSS Modules</name>
  <files>src/pages/Home.module.css, src/pages/Discography.module.css, src/pages/Gallery.module.css, src/pages/Contact.module.css, src/pages/About.module.css, src/pages/Listen.module.css, src/pages/NotFound.module.css</files>
  <action>
Remove all fixed font-size declarations on h1 elements in page CSS Modules. The base layer now provides fluid sizing - CSS Module overrides would defeat that.

**Home.module.css:**
Lines 93-94 inside the @media (width <= 600px) block, remove:
```css
font-size: 1.2rem;
```
Keep the other mobile h1 styles (display, max-width, margin-bottom, overflow, text-overflow, white-space).

**Discography.module.css:**
Lines 72-75 inside @media (width <= 800px) .discography-title, remove:
```css
font-size: 1.5rem;
line-height: 1rem;
```
Keep text-align: center.

**Gallery.module.css:**
Lines 99-101 inside @media (width <= 800px) .gallery-container h1, remove:
```css
font-size: 1.8rem;
line-height: 1rem;
```
Keep text-align: center.

**Contact.module.css:**
No h1 font-size override to remove (verified - h1 styling doesn't set font-size).

**About.module.css:**
No h1 font-size override to remove (verified - h1 styling doesn't set font-size).

**Listen.module.css:**
No h1 font-size override to remove (verified - h1 styling doesn't set font-size).

**NotFound.module.css:**
No h1 font-size override to remove (verified - h1 styling doesn't set font-size).

DO NOT remove other h1 styles like font-family, color, text-transform, margins - these are intentional page-specific overrides. Only remove font-size (and line-height where it was paired with a fixed font-size).
  </action>
  <verify>
grep -r "font-size.*1\.2rem" src/pages/ returns no matches (Home h1 fixed size removed).
grep -r "font-size.*1\.5rem" src/pages/ returns no matches for h1 (Discography title fixed size removed).
grep -r "font-size.*1\.8rem" src/pages/ returns no matches (Gallery h1 fixed size removed).
npm run build completes without errors.
  </verify>
  <done>
Page CSS Modules no longer override h1 font-size at breakpoints, allowing the base layer's fluid typography to cascade through.
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify fluid typography on all pages</name>
  <files>None (verification only)</files>
  <action>
Run verification to confirm both gaps are now closed:

1. Build verification:
```bash
npm run build
```
Should complete without errors.

2. Token application confirmed in globals.css:
```bash
grep -c "@apply text-" src/styles/globals.css
```
Should return 6 (one per heading level).

3. Fixed font-sizes removed from CSS Modules:
```bash
grep -rn "font-size.*rem" src/pages/*.module.css | grep -E "h1|title" | grep -v "1rem"
```
Should return no matches for heading font-sizes other than 1rem (which is acceptable for non-heading elements).

4. Dev server visual check:
```bash
npm run dev
```
Open browser at localhost:5173:
- Home page: resize from 400px to 1280px - h1 "Latest Posts" should scale smoothly
- Gallery page: resize - "Gallery" h1 scales smoothly
- Discography page: resize - title scales smoothly
- Contact page: resize - "Contact" h1 scales smoothly

Each h1 should be noticeably larger at desktop than mobile, with smooth interpolation (no sudden jumps at breakpoints).
  </action>
  <verify>
npm run build completes successfully.
Visual inspection confirms headings scale fluidly on Home, Gallery, Discography pages.
No breakpoint "jumps" visible when resizing browser.
  </verify>
  <done>
Both verification gaps closed: (1) User sees typography scale fluidly on ALL pages, (2) Developer gets clamp()-based sizing on any h1-h6 element automatically.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Build verification:
   ```bash
   npm run build
   ```
   Should complete without errors.

2. Base layer tokens applied:
   ```bash
   grep -A1 "^h1 {" src/styles/globals.css
   ```
   Should show `@apply text-6xl;`

3. Fixed font-sizes removed:
   ```bash
   grep -rn "font-size: 1\.[2-9]rem" src/pages/*.module.css
   ```
   Should return 0 matches (no more fixed heading font-sizes at breakpoints).

4. Gap 1 verification - Fluid scaling on pages:
   - Run `npm run dev`
   - Open any page (Home, Gallery, Discography)
   - Resize browser from 400px to 1280px
   - Confirm h1 scales smoothly without jumps

5. Gap 2 verification - Automatic token application:
   - Create a test: add a raw `<h2>Test</h2>` element
   - Confirm it automatically gets fluid text-5xl sizing
   - (Can verify in DevTools by inspecting computed font-size at different widths)
</verification>

<success_criteria>
1. globals.css @layer base has fluid text-* applied to h1-h6 elements
2. No fixed font-size breakpoint overrides remain in page CSS Modules for h1 elements
3. Build passes without errors
4. All page headings (Home, Gallery, Discography, Contact, About, Listen, NotFound) scale fluidly
5. Verification gap "User sees typography scale fluidly from mobile to desktop without breakpoint jumps" is closed
6. Verification gap "Developer can use clamp()-based sizing for any text element" is closed (h1-h6 now automatic)
</success_criteria>

<output>
After completion, create `.planning/phases/03-typography-system/03-03-SUMMARY.md`
</output>
